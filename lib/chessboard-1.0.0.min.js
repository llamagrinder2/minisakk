/*! chessboard.js v1.0.0 | (c) 2019 Chris Oakman | MIT License chessboardjs.com/license */
!function(){"use strict";var z=window.jQuery,F="abcdefgh".split(""),r=20,A="…",W="1.8.3",e="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR",G=pe(e),n=200,t=200,o=60,a=30,i=100,H={};function V(e,r,n){function t(){o=0,a&&(a=!1,s())}var o=0,a=!1,i=[],s=function(){o=window.setTimeout(t,r),e.apply(n,i)};return function(e){i=arguments,o?a=!0:s()}}function Z(){return"xxxx-xxxx-xxxx-xxxx-xxxx-xxxx-xxxx-xxxx".replace(/x/g,function(e){return(16*Math.random()|0).toString(16)})}function _(e){return JSON.parse(JSON.stringify(e))}function s(e){var r=e.split(".");return{major:parseInt(r[0],10),minor:parseInt(r[1],10),patch:parseInt(r[2],10)}}function ee(e,r){for(var n in r)if(r.hasOwnProperty(n))for(var t="{"+n+"}",o=r[n];-1!==e.indexOf(t);)e=e.replace(t,o);return e}function re(e){return"string"!=typeof e||-1===e.indexOf("/")&&-1===e.indexOf(" ")?!1:!0}function ne(e){if("string"!=typeof e)return!1;for(var r=e.split("/"),n=0;n<r.length;n++)if(""===r[n]||r[n].length>8)return!1;return!0}function te(e){if("string"!=typeof e)return!1;for(var r=e.split(" "),n=0;n<r.length;n++)if(""===r[n]||r[n].length>2)return!1;return!0}function oe(e){return"string"==typeof e&&-1!==e.search(/^[a-h][1-8]$/)}function ae(e){return"string"==typeof e&&-1!==e.search(/^[rnbqkpRNBQKP1-8/]+$/)}function ie(e){return"string"==typeof e&&-1!==e.search(/^[rnbqkpRNBQKP]$/)}var se=function(e){var r;if(z&&"1.8.3"===z.fn.jquery&&"function"==typeof z.ui){if(s(z.ui.version).major,s(z.ui.version).minor<8){return m(2822,"JQuery UI 1.8.x is used, but JQuery UI 1.8.8 or higher is required. Please upgrade JQuery UI to the latest version. More info at http://jqueryui.com/download"),!1}return!0}return m(2822,"You must have jQuery 1.8.3 or higher and jQuery UI 1.8.8 or higher installed. Please go to http://jquery.com/download and http://jqueryui.com/download"),!1}(),le={alpha:F,pieces:{wP:"wP",wN:"wN",wB:"wB",wR:"wR",wQ:"wQ",wK:"wK",bP:"bP",bN:"bN",bB:"bB",bR:"bR",bQ:"bQ",bK:"bK"},square:"square-55d63",board:"board-b72b1",clearfix:"clearfix-7da63",highlight1:"highlight1-32417",highlight2:"highlight2-9c5d2",notation:"notation-322f9",alpha:"alpha-d2270",numeric:"numeric-fc462",sparePieces:"spare-pieces-7492f",sparePiecesTop:"spare-pieces-top-39578",sparePiecesBottom:"spare-pieces-bottom-26879",piece:"piece-4173f"},he={showErrors:"true",draggable:"false",dropOffBoard:"snapback",position:"start",sparePieces:"false",pieceTheme:"img/{piece}.png",appearSpeed:n,moveSpeed:t,snapbackSpeed:o,snapSpeed:a,trashSpeed:i,orientation:"white",promotionDialog:"false"},ce=function(e,r){var n=z.extend(!0,{},he,r);return n.pieceTheme&&("string"==typeof n.pieceTheme||"function"==typeof n.pieceTheme)||(m(7262,"Invalid pieceTheme: "+n.pieceTheme),n.pieceTheme=he.pieceTheme),n},pe=function(e){"string"!=typeof e&&m(6394,"Invalid FEN string: "+e);var r=e.split(" ")[0];if(!ae(r))return m(6394,"Invalid FEN string: "+e),!1;for(var n={},t=r.split("/"),o=0;o<t.length;o++){for(var a="",i=0;i<t[o].length;i++){var s=t[o].charAt(i);isNaN(s)?a+=s:!function(e){for(var r=0;r<parseInt(e,10);r++)a+="-"}(s)}for(var l=0;l<a.length;l++){var c=F[l]+(8-o);n[c]=a.charAt(l)}}return n},de=function(e){var r="";for(var n in e)if(e.hasOwnProperty(n)){var t=e[n];t.search(/^[bw][RNBQKP]$/)&&!0!==t||(r+=t+\",\")}return r=r.replace(/,\s*$/,""),r},me=function(e,r,n,t){var o=(t?z("<img src=\""+f.pieceTheme(r,!0)+"\" />"):r),a=z("#"+e);return a.html(o).css({width:d,height:d}),n&&a.addClass("hide"),a},ue=function(e){var r,n,t,o=(e.pageX-c.offset().left)/d,(a=(e.pageY-c.offset().top)/d,F[Math.floor(o)]);return r=F[Math.floor(o)],n=Math.ceil(8-a),t=r+n,oe(t)?t:!1},fe=function(){return"white"===f.orientation?!0:!1},ge=function(e,r,n){var t=ee('<div class="{piece}" data-piece="{piece}" style="left:{left};top:{top};"></div>',{"piece":e,"left":r,top:n});return z(t)},ye=function(e){var r,n,t,o;if(z(e.target).hasClass(le.piece)){r=z(e.target).parent().attr("data-square"),o=r}else if(z(e.target).hasClass(le.square)){r=z(e.target).attr("data-square"),o=r}else{if(!z(e.target).hasClass(le.notation)){m(6382,"Click target is not a square or piece: "+e.target.tagName),e.originalEvent.target.id;return}}var a=w[r];return f.promotionDialog&&(a.search(/^[wW][P]$/)||a.search(/^[bB][P]$/))&&("white"===a.charAt(0)?8===parseInt(r.charAt(1),10):1===parseInt(r.charAt(1),10))?z("#"+h).is(":visible")?(z("#"+h).find(".piece-promotion").css({width:d/4,height:d/4}),z("#"+h).dialog("open"),!0):(z("#"+h).find(".piece-promotion").css({width:d/4,height:d/4}),z("#"+h).dialog({dialogClass:"no-close",closeOnEscape:!1,draggable:!1,modal:!0,resizable:!1,height:d+20,width:d,buttons:[{text:"Q",click:function(){z(this).dialog("close"),f.promotionDialog="false",z("#"+w[selectedSquare]).attr("data-piece")===le.pieces.wP?w[selectedSquare]=le.pieces.wQ:w[selectedSquare]=le.pieces.bQ,f.onPromotion(selectedSquare,o,w[selectedSquare],_(w),p),be(r,o,w[selectedSquare])}},{text:"R",click:function(){z(this).dialog("close"),f.promotionDialog="false",z("#"+w[selectedSquare]).attr("data-piece")===le.pieces.wP?w[selectedSquare]=le.pieces.wR:w[selectedSquare]=le.pieces.bR,f.onPromotion(selectedSquare,o,w[selectedSquare],_(w),p),be(r,o,w[selectedSquare])}},{text:"B",click:function(){z(this).dialog("close"),f.promotionDialog="false",z("#"+w[selectedSquare]).attr("data-piece")===le.pieces.wP?w[selectedSquare]=le.pieces.wB:w[selectedSquare]=le.pieces.bB,f.onPromotion(selectedSquare,o,w[selectedSquare],_(w),p),be(r,o,w[selectedSquare])}},{text:"N",click:function(){z(this).dialog("close"),f.promotionDialog="false",z("#"+w[selectedSquare]).attr("data-piece")===le.pieces.wP?w[selectedSquare]=le.pieces.wN:w[selectedSquare]=le.pieces.bN,f.onPromotion(selectedSquare,o,w[selectedSquare],_(w),p),be(r,o,w[selectedSquare])}}]),!0):!1},xe=function(){return z("."+le.piece).length},be=function(e,r,n,t){"function"==typeof f.onSnapEnd&&(f.onSnapEnd(e,r,n,_(w),t),!0)};var xe=function(e){var r,n=F[0],t=F[F.length-1],o=(8-e.numeric)+(fe()?0:-1),a=e.alpha;if(e.numeric>0&&e.numeric<=8&&(n=F[0],t=F[F.length-1],fe()||(n=F[F.length-1],t=F[0])),fe()){switch(a){case"a":r=fe()?0:7*d;break;case"b":r=fe()?d:6*d;break;case"c":r=fe()?2*d:5*d;break;case"d":r=fe()?3*d:4*d;break;case"e":r=fe()?4*d:3*d;break;case"f":r=fe()?5*d:2*d;break;case"g":r=fe()?6*d:d;break;case"h":r=fe()?7*d:0}n="a"===a&&fe()||"h"===a&&!fe()?!1:!0,t="h"===a&&fe()||"a"===a&&!fe()?!1:!0}else{switch(a){case"a":r=fe()?0:7*d;break;case"b":r=fe()?d:6*d;break;case"c":r=fe()?2*d:5*d;break;case"d":r=fe()?3*d:4*d;break;case"e":r=fe()?4*d:3*d;break;case"f":r=fe()?5*d:2*d;break;case"g":r=fe()?6*d:d;break;case"h":r=fe()?7*d:0}n="a"===a&&!fe()||"h"===a&&fe()?!1:!0,t="h"===a&&!fe()||"a"===a&&fe()?!1:!0}return{left:r,top:o*d,bottom:o*d,right:r}},ve=function(e){var r=e.split("");return{numeric:parseInt(r[1],10),alpha:r[0]}};var E=z(window).width(),k=z(window).height();function we(e){return"black"===e?z(e).children("."+le.numeric).css("color",le.black.color).end().children("."+le.alpha).css("color",le.black.color):z(e).children("."+le.numeric).css("color",le.white.color).end().children("."+le.alpha).css("color",le.white.color)}function Ce(e){return z(e).children("."+le.numeric).css("color","inherit").end().children("."+le.alpha).css("color","inherit")}var L,C,M,b,x,v,p,P,T,w={},d=0,c=null,h=null,f={};return z.fn.chessboard=function(e){var c=z("body");if(!se){return m(2823,"Error: chessboard.js requires jQuery 1.8.3 or higher and jQuery UI 1.8.8 or higher to be installed."),!1}var d={};return d=ce(d,e),this.each(function(){var e=z(this);f=d,L=e,r=100,A="…",d=r,k=z(window).height();var n=L.attr("id");if(!n||""===n)return m(2824,"Element passed to chessboard() is missing an ID"),!1;H={chessboard:n,board:n+"_board",sparePiecesTop:n+"_spare_pieces_top",sparePiecesBottom:n+"_spare_pieces_bottom"},C=n+"_board_sizing",M=n+"_board_notation",b=n+"_white_highlight",x=n+"_black_highlight",P=n+"_promotion_dialog",h=P,L.html(ee('<div class="'+le.clearfix+'" id="{chessboard}" ><div class="'+le.board+'" id="{board}" ></div><div class="'+le.notation+'" id="{notation}" ></div></div>',H)),L.addClass(le.chessboard),T=L.find("#"+M),board=L.find("#"+H.board),L.find("#"+C).css("marginTop",L.width()-L.height());for(var t=0;t<F.length;t++)for(var o=1;o<=8;o++){var a=F[t]+o,i=z('<div class="'+le.square+'" id="'+H.chessboard+'_'+a+'" data-square="'+a+'" ></div>');"white"===ve(a).numeric%2==ve(a).alpha.charCodeAt(0)%2?i.addClass("white-1e1d7"):i.addClass("black-3c85d"),board.append(i)}for(var s=0;s<F.length;s++){var l=F[s];z('<div class="'+le.notation+' '+le.alpha+'">'+l+"</div>").appendTo("#"+H.chessboard+"_"+l+"1"),z('<div class="'+le.notation+' '+le.numeric+'">'+(s+1)+"</div>").appendTo("#"+H.chessboard+"_a"+(s+1))}var g={},v={};function u(e,r,n){if(e)return me(e,r,n,f.sparePieces);return!1}function p(){for(var e in w)if(w.hasOwnProperty(e)){var r=w[e];if(u(e,r,f.sparePieces))if(f.sparePieces){var n=z("."+r+"."+le.piece).filter(":first");u(e,r,!1),n.remove()}else u(e,r,!1)}return!0}function S(e){return!(!e||"object"!=typeof e||Array.isArray(e))}z("body").on("mousedown mouseup",".'+le.piece+'",function(e){f.showErrors&&e.originalEvent.target.id;e.stopPropagation()}),z("body").on("mousedown",".'+le.square+'",function(e){var r=z(e.currentTarget).attr("data-square");f.hasOwnProperty("onSquareClick")&&f.onSquareClick(r,_(w),fe())}),z("body").on("mouseup",".'+le.square+'",function(e){f.hasOwnProperty("onSquareClick")&&z(e.currentTarget).attr("data-square");e.stopPropagation()}),z("body").on("mouseup",".'+le.chessboard+'",function(e){f.hasOwnProperty("onBoardClick")&&f.onBoardClick(_(w),fe())}),board.on("mouseover",".'+le.square+'",function(e){var r=z(e.currentTarget).attr("data-square"),n=!1;w.hasOwnProperty(r)&&(n=w[r]),f.hasOwnProperty("onMouseoverSquare")&&f.onMouseoverSquare(r,n,_(w),fe())}),board.on("mouseout",".'+le.square+'",function(e){var r=z(e.currentTarget).attr("data-square");if(w.hasOwnProperty(r)){var n=!1;w.hasOwnProperty(r)&&(n=w[r]),f.onMouseoutSquare(r,n,_(w),fe())}}),c.on("mouseover","."+le.sparePiecesTop+",."+le.sparePiecesBottom,function(e){f.hasOwnProperty("onMouseoverSparePiece")&&f.onMouseoverSparePiece(z(e.currentTarget).attr("data-piece"),_(w),fe())}),c.on("mouseout","."+le.sparePiecesTop+",."+le.sparePiecesBottom,function(e){f.hasOwnProperty("onMouseoutSparePiece")&&f.onMouseoutSparePiece(z(e.currentTarget).attr("data-piece"),_(w),fe())}),z("body").on("mousedown",".'+le.piece+'",function(e){f.showErrors&&e.originalEvent.target.id;if(e.which){e.preventDefault(),f.hasOwnProperty("onDragStart")&&f.onDragStart(ue(e),w[ue(e)],_(w),fe());var r=z(e.target).hasClass(le.piece)?z(e.target):z(e.target).find("."+le.piece),n=r.offset().left,t=r.offset().top,o=r.css("z-index");r.css({"position":"absolute","z-index":9999,"left":n,"top":t}),z("body").on("mousemove",function(e){r.css({left:e.pageX-r.width()/2,top:e.pageY-r.height()/2})}),z("body").on("mouseup",function(e){z("body").off("mousemove"),z("body").off("mouseup"),r.css("z-index",o),f.hasOwnProperty("onDrop")&&("snapback"===f.dropOffBoard&&r.css({left:n,top:t}),f.onDrop(ue(e),w[ue(e)],r.attr("data-piece"),_(w),fe()))})}}),L.on("mouseup",".'+le.square+'",function(e){var r=z(e.currentTarget).attr("data-square");f.hasOwnProperty("onSquareClick")&&f.onSquareClick(r,_(w),fe())}),f.hasOwnProperty("onPieceClick")&&z("body").on("click",".'+le.piece+'",function(e){var r=z(e.target).closest("."+le.square).attr("data-square"),n=w[r];f.onPieceClick(r,n,_(w),fe())}),L.on("change",function(e){f.hasOwnProperty("onChange")&&f.onChange(_(w),fe())}),z(window).on("resize",function(){d=board.width()/8,L.find("."+le.square).css({width:d,height:d}),L.find("."+le.piece).css({width:d,height:d}),z("#"+h).find(".piece-promotion").css({width:d/4,height:d/4})});var Y=z.fn.chessboard;z.fn.chessboard=function(r){return!r||"string"!=typeof r?(Y.apply(this,arguments)):Y.apply(this,arguments),this};var O={clear:function(e){return w={},e&&z("."+le.piece).remove(),Y.apply(L,[O.position("clear")]),!0},position:function(e,r){if("undefined"==typeof e)return _(w);if("string"==typeof e&&"clear"===e)return w={};if(S(e))w=_(e);else if(re(e))w=pe(e);else return m(6395,"Invalid value passed to the position() method."),!1;var n=L.find("."+le.piece);return n.remove(),p(),r&&Y.apply(L,[O.position(w,!1)]),!0},orientation:function(e){if("undefined"==typeof e)return f.orientation;if("string"==typeof e&&("white"===e||"black"===e))f.orientation=e,Y.apply(L,[O.position(w,!1)]),p();else return m(5482,"Invalid value passed to the orientation() method."),!1},fen:function(){var e=0,r="",n=0;for(var t in w){if(w.hasOwnProperty(t)){var o=ve(t).alpha,a=ve(t).numeric;F.indexOf(o)+1,a}}for(var i=8;i>=1;i--){for(var s=0;s<8;s++){var l=F[s]+i;w.hasOwnProperty(l)?(e>0&&(r+=e,e=0),r+=w[l]):e++}e>0&&(r+=e,e=0),i>1&&(r+="/")}return r},destroy:function(){L.html(""),L.off(""),z(window).off("resize"),z("body").off("click dragstart"),L.removeClass(le.chessboard),Y.apply(L,[O.clear(!0)]),f={}}},X=function(){return"string"==typeof console.log&&"string"==typeof console.warn&&"string"==typeof console.error?!0:!1}(),m=function(e,r,n){if(!0===f.showErrors){var t="Chessboard Error "+e+": "+r;return n&&"string"==typeof n&&(t+=" About: "+n),X&&console.warn(t),!0}return!1};function j(e){if("string"==typeof e&&e.length>0){var r=e.split(".");if(r.length>0){var n=parseInt(r[0],10);if(n>0&&8>=n){var t=r[1];if(t&&t.length>0&&F.indexOf(t)>-1)return!0}}}}return function(e){return"string"==typeof e&&0!==e.length&&-1!==e.search(/^([a-h][1-8])(:[a-h][1-8]){0,1}$/)};}(),window.Chessboard="function"==typeof Chessboard?Chessboard:null;
